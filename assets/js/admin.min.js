function switch1(){$j("#solrconnect_single").is(":checked")&&($j("#solr_admin_tab2").css("display","block"),$j("#solr_admin_tab2_btn").addClass("solr_admin_on"),$j("#solr_admin_tab3").css("display","none"),$j("#solr_admin_tab3_btn").removeClass("solr_admin_on")),$j("#solrconnect_separated").is(":checked")&&($j("#solr_admin_tab2").css("display","none"),$j("#solr_admin_tab2_btn").removeClass("solr_admin_on"),$j("#solr_admin_tab3").css("display","block"),$j("#solr_admin_tab3_btn").addClass("solr_admin_on"))}function doLoad(a,b){$j.post(solr.ajax_url,{action:"solr_options",security:solr.security,method:"load",type:a,prev:b},function(a){var b=JSON.parse(a);$j("#percentspan").show().text(b.percent+"%"),b.end?($j("#percentspan").hide(),enableAll()):doLoad(b.type,b.last)})}function handleResults(a){$j("#percentspan").text(a.percent+"%"),a.end?($j("#percentspan").remove(),enableAll()):doLoad(a.type,a.last)}function disableAll(){$j.each(solr.post_types,function(a,b){$j("[name=s4wp_postload_"+b.post_type).attr("disabled","disabled")}),$j("[name=s4wp_deleteall]").attr("disabled","disabled"),$j("[name=s4wp_init_blogs]").attr("disabled","disabled"),$j("[name=s4wp_optimize]").attr("disabled","disabled"),$j("[name=s4wp_ping]").attr("disabled","disabled"),$j("#settingsbutton").attr("disabled","disabled")}function enableAll(){$j.each(solr.post_types,function(a,b){$j("[name=s4wp_postload_"+b.post_type+"]").removeAttr("disabled")}),$j("[name=s4wp_postload]").removeAttr("disabled"),$j("[name=s4wp_deleteall]").removeAttr("disabled"),$j("[name=s4wp_init_blogs]").removeAttr("disabled"),$j("[name=s4wp_optimize]").removeAttr("disabled"),$j("[name=s4wp_ping]").removeAttr("disabled"),$j("#settingsbutton").removeAttr("disabled")}jQuery(document).ready(function(){var a=jQuery('input[name="_wp_http_referer"]').val();a=a.replace(/#.*$/,""),jQuery("#solr-tabs").find("a").click(function(){jQuery("#solr-tabs").find("a").removeClass("nav-tab-active"),jQuery(".solrtab").removeClass("active");var b=jQuery(this).attr("id").replace("-tab","");jQuery("#"+b).addClass("active"),jQuery(this).addClass("nav-tab-active"),jQuery('input[name="_wp_http_referer"]').val(a+"#top#"+b)});var b=window.location.hash.replace("#top#","");""!==b&&"#_=_"!==b||(b=jQuery(".solrtab").first().attr("id")),jQuery("#"+b).addClass("active"),jQuery("#"+b+"-tab").addClass("nav-tab-active").click()});var $j=jQuery.noConflict();$j(document).ready(function(){$j("#percentspan").hide(),switch1(),$j(".s4wp_postload_post").click(function(){disableAll(),doLoad("post",0)})}),function(a){var b={batchIndexTemplate:!1,currentBatch:0,totalBatches:0,successPosts:0,failedPosts:0,remainingPosts:0,startTime:!1,init:function(){this.bindEvents(),this.setupInitialState(),this.renderIndexUI()},bindEvents:function(){a("#solr-batch-index").on("click","input",a.proxy(this.handleClickIndexPosts,this))},setupInitialState:function(){this.batchIndexTemplate=wp.template("solr-batch-index");var b=a("#tmpl-solr-batch-index");this.currentBatch=b.data("current-batch"),this.totalBatches=b.data("total-batches"),this.remainingPosts=b.data("remaining-posts"),this.totalPosts=b.data("total-posts")},disableAll:function(){a(".solr-admin-action").attr("disabled","disabled")},enableAll:function(){a(".solr-admin-action").removeAttr("disabled")},handleClickIndexPosts:function(b){disableAll(),b.preventDefault();var c=a(b.currentTarget),d="s4wp_start_index"===c.attr("name")?"start":"resume";"start"===d&&(this.currentBatch=1,this.remainingPosts=this.totalPosts),this.startTime=new Date,this.elapsedTime="00:00:00",this.renderIndexUI(),this.indexPosts(d)},indexPosts:function(b){"undefined"==typeof b&&(b="resume"),a.post(solr.ajax_url,{action:"solr_options",security:solr.security,method:b+"-index"},a.proxy(function(a){this.currentBatch=a.currentBatch,this.successPosts+=a.successPosts,this.failedPosts+=a.failedPosts,this.remainingPosts=a.remainingPosts,this.remainingPosts>0?(this.renderIndexUI(),this.indexPosts()):this.startTime=!1},this))},renderIndexUI:function(){var b=!1;if(this.startTime){paddingLeft=function(a,b){return String(b+a).slice(-b.length)};var c=new Date,d=c-this.startTime;d/=1e3;var e=paddingLeft(Math.round(d%60),"00");d=Math.floor(d/60);var f=paddingLeft(Math.round(d%60),"00");d=Math.floor(d/60);var g=paddingLeft(Math.round(d%24),"00");b=g+":"+f+":"+e}a("#solr-batch-index").html(this.batchIndexTemplate({currentBatch:this.currentBatch,totalBatches:this.totalBatches,elapsedTime:b,successPosts:this.successPosts,failedPosts:this.failedPosts,remainingPosts:this.remainingPosts}))}};a(document).ready(a.proxy(b.init,b))}(jQuery);